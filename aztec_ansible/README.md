<!-- @format -->

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–∑–ª–æ–≤ Aztec —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –ø–ª–µ–π–±—É–∫–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —É–∑–ª–æ–≤ Aztec –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∞ —Ç–∞–∫–∂–µ —Å–æ–±–∏—Ä–∞—Ç—å proof –¥–∞–Ω–Ω—ã–µ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤.

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ü–ª–µ–π–±—É–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

- ‚úÖ **–ü–æ—ç—Ç–∞–ø–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 3 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —ç—Ç–∞–ø–∞
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful failures —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- ‚úÖ **Timeout –∑–∞—â–∏—Ç–∞** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è
- ‚úÖ **Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ **–¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥** - —É–¥–æ–±–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –∞–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [IMPROVEMENTS.md](IMPROVEMENTS.md)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
aztec_ansible/
‚îú‚îÄ‚îÄ common/                  # –û–±—â–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–ª–µ–π–±—É–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ansible.cfg          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
‚îÇ   ‚îú‚îÄ‚îÄ csv_to_inventory.py  # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ CSV –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
‚îÇ   ‚îú‚îÄ‚îÄ test_ssh.sh          # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ssh/                 # SSH –∫–ª—é—á–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md        # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—é SSH –∫–ª—é—á–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ vars/                # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ       ‚îî‚îÄ‚îÄ server_vars.yml  # –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (L1_RPC_URL, L1_CONSENSUS_URL)
‚îú‚îÄ‚îÄ install_playbook/        # –ü–ª–µ–π–±—É–∫–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É–∑–ª–æ–≤ (3 —ç—Ç–∞–ø–∞)
‚îÇ   ‚îú‚îÄ‚îÄ 01_prepare.yml       # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ 02_install_docker.yml # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
‚îÇ   ‚îú‚îÄ‚îÄ 03_install_aztec.yml # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Aztec
‚îÇ   ‚îú‚îÄ‚îÄ run_01_prepare.sh    # –°–∫—Ä–∏–ø—Ç —ç—Ç–∞–ø–∞ 1
‚îÇ   ‚îú‚îÄ‚îÄ run_02_install_docker.sh # –°–∫—Ä–∏–ø—Ç —ç—Ç–∞–ø–∞ 2
‚îÇ   ‚îú‚îÄ‚îÄ run_03_install_aztec.sh  # –°–∫—Ä–∏–ø—Ç —ç—Ç–∞–ø–∞ 3
‚îÇ   ‚îî‚îÄ‚îÄ run_all_stages.sh    # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ —Å—Ä–∞–∑—É
‚îú‚îÄ‚îÄ get_proof_playbook/      # –ü–ª–µ–π–±—É–∫ –¥–ª—è —Å–±–æ—Ä–∞ proof –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ get_proof.yml        # –ü–ª–µ–π–±—É–∫ —Å–±–æ—Ä–∞ proof
‚îÇ   ‚îú‚îÄ‚îÄ run_get_proof.sh     # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∞ proof
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–±–æ—Ä—É proof
‚îú‚îÄ‚îÄ logs/                    # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ IMPROVEMENTS.md          # –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md                # –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3
- Ansible (–≤–µ—Ä—Å–∏—è 2.9+)
- –§–∞–π–ª CSV —Å–æ —Å–ø–∏—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–æ–≤
- SSH –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä–∞–º
- SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä–∞–º —Å –ø—Ä–∞–≤–∞–º–∏ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SSH –∫–ª—é—á–µ–π

**–í–ê–ñ–ù–û**: –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–ª–µ–π–±—É–∫–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –∫–ª—é—á–∏:

1. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á** –≤ –ø–∞–ø–∫—É `common/ssh/`:

   ```bash
   cp /path/to/your/private_key aztec_ansible/common/ssh/id_rsa
   chmod 600 aztec_ansible/common/ssh/id_rsa
   ```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –≤ `~ubuntu/.ssh/authorized_keys`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**:

   ```bash
   # –¢–µ—Å—Ç –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   ssh -i aztec_ansible/common/ssh/id_rsa ubuntu@IP_ADDRESS

   # –¢–µ—Å—Ç –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ CSV
   cd aztec_ansible/common
   ./test_ssh.sh your_servers.csv
   ```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ "Permission denied (publickey)":**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∏ –ø—Ä–∞–≤–∞ SSH –∫–ª—é—á–∞:**

   ```bash
   ls -la aztec_ansible/common/ssh/id_rsa
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: -rw------- (–ø—Ä–∞–≤–∞ 600)
   ```

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö:**

   ```bash
   # –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞
   ssh-copy-id -i aztec_ansible/common/ssh/id_rsa ubuntu@SERVER_IP
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   ```bash
   cd aztec_ansible/common
   ./test_ssh.sh your_servers.csv
   ```

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: [common/ssh/README.md](common/ssh/README.md)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CSV —Ñ–∞–π–ª–∞

CSV —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã:

- `IP` - IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
- `ADDRESS` - Ethereum –∞–¥—Ä–µ—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `PRIVATE_KEY` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

–ü—Ä–∏–º–µ—Ä:

```
IP,ADDRESS,PRIVATE_KEY
192.168.1.10,0x123...abc,0xdef...789
192.168.1.11,0x456...def,0xghi...012
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–ª–µ–π–±—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `SERVER_IP` - IP –∞–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
- `ETH_ADDRESS` - –∏–∑ CSV —Ñ–∞–π–ª–∞ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
- `VALIDATOR_PRIVATE_KEY` - –∏–∑ CSV —Ñ–∞–π–ª–∞ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
- `L1_RPC_URL` - –æ–±—â–∞—è –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ vars/server_vars.yml)
- `L1_CONSENSUS_URL` - –æ–±—â–∞—è –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ vars/server_vars.yml)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ —Å—Ä–∞–∑—É

```bash
cd aztec_ansible/install_playbook
chmod +x run_all_stages.sh
./run_all_stages.sh path/to/your/servers.csv
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—ç—Ç–∞–ø–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

2. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤**:

   ```bash
   # –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å inventory
   cd ../../
   ./generate_hosts.sh path/to/your/servers.csv

   # –ó–∞—Ç–µ–º –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä—ã
   cd aztec_ansible/install_playbook
   ./run_01_prepare.sh hosts_your_servers
   ```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (curl, wget, htop –∏ –¥—Ä.)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

#### –≠—Ç–∞–ø 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
chmod +x run_02_install_docker.sh
./run_02_install_docker.sh
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Docker
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker CE
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ubuntu –≤ –≥—Ä—É–ø–ø–µ docker
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É Docker

#### –≠—Ç–∞–ø 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Aztec

```bash
chmod +x run_03_install_aztec.sh
./run_03_install_aztec.sh
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

- –°–∫–∞—á–∏–≤–∞–µ—Ç Install.sh —Å–∫—Ä–∏–ø—Ç
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (IP, –∞–¥—Ä–µ—Å–∞, –∫–ª—é—á–∏)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É Aztec
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
FORCE=1 ./run_02_install_docker.sh

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
VERBOSE=1 ./run_01_prepare.sh hosts_servers
```

### –°–±–æ—Ä proof –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —É–∑–ª–æ–≤ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å proof –¥–∞–Ω–Ω—ã–µ:

```bash
cd aztec_ansible/get_proof_playbook
./run_get_proof.sh
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ timeout (—Å–µ–∫—É–Ω–¥—ã)
TIMEOUT=600 ./run_get_proof.sh

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
VERBOSE=1 ./run_get_proof.sh

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
./run_get_proof.sh --help
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª `proof_results.csv` —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

- `ip,address,block_number,proof,status,timestamp`

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—ç—Ç–∞–ø–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–õ—É—á—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å** - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
2. **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥—á–µ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —ç—Ç–∞–ø–µ
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - Docker –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
4. **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∏ Docker
5. **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —É–∑–ª–æ–≤:

```bash
cd aztec_ansible/common

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
ansible all -i inventory/hosts -m shell -a "systemctl is-active aztec-node.service"

# –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
ansible all -i inventory/hosts -m shell -a "journalctl -u aztec-node.service -n 20"

# –í–µ—Ä—Å–∏—è Docker
ansible all -i inventory/hosts -m shell -a "docker --version"
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ L1 RPC URLs

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `vars/server_vars.yml`):

- L1_RPC_URL: `https://lb.drpc.org/ogrpc?network=sepolia&dkey=Au8yDd-i2UInsBCU3RSbVp7lazFCMKAR8LxOfpPAH9l9`
- L1_CONSENSUS_URL: `https://lb.drpc.org/rest/Au8yDd-i2UInsBCU3RSbVp7lazFCMKAR8LxOfpPAH9l9/eth-beacon-chain-sepolia`

## üìä –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –æ–±—â—É—é –ø–∞–ø–∫—É `logs/`:

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤:

- `prepare_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- `docker_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
- `aztec_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Aztec
- `complete_install_YYYYMMDD_HHMMSS.log` - –æ–±—â–∏–π –ª–æ–≥ –ø–æ–ª–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `proof_collection_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —Å–±–æ—Ä–∞ proof
- `proof_summary_YYYYMMDD_HHMMSS.txt` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–±–æ—Ä–∞ proof
- `ansible.log` - –æ–±—â–∏–π –ª–æ–≥ Ansible –æ–ø–µ—Ä–∞—Ü–∏–π (–≤ common/)

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
# –í—Å–µ –ª–æ–≥–∏
ls aztec_ansible/logs/

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
tail -f aztec_ansible/logs/complete_install_*.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∞ proof
tail -f aztec_ansible/logs/proof_collection_*.log
```

## üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –¢–µ—Å—Ç SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
cd aztec_ansible/common
./test_ssh.sh your_servers.csv
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤:

```bash
# Connectivity test
ansible all -i inventory/hosts -m ping

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
ansible all -i inventory/hosts -m systemd -a "name=aztec-node.service"

# –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
ansible all -i inventory/hosts -m shell -a "journalctl -u aztec-node.service -n 10"
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- SSH –∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git —á–µ—Ä–µ–∑ `.gitignore`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–∞–∫–∂–µ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git
- –ü–∞–ø–∫–∞ –ª–æ–≥–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∞ –∏–∑ git –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π host keys –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å Ansible –∏ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ CSV —Ñ–∞–π–ª–∞
- –ü–ª–µ–π–±—É–∫–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `ubuntu` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
