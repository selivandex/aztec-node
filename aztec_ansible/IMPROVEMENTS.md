<!-- @format -->

# –£–ª—É—á—à–µ–Ω–∏—è –ø–ª–µ–π–±—É–∫–æ–≤ Aztec

## –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

### 1. –ü–ª–µ–π–±—É–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–Ω–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ—Å–ª–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –±–ª–æ–∫–∞–º–∏ rescue
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ Timeout –∑–∞—â–∏—Ç–∞ (30 –º–∏–Ω—É—Ç)
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### 2. –ü–ª–µ–π–±—É–∫ —Å–±–æ—Ä–∞ proof:

- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–ø–∏—Å—å CSV —á–µ—Ä–µ–∑ temp —Ñ–∞–π–ª—ã
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å—Ç–∞—Ç—É—Å, timestamp)
- ‚úÖ Timeout –∑–∞—â–∏—Ç–∞ (5 –º–∏–Ω—É—Ç)
- ‚úÖ Connectivity test –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–æ–º
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3. Bash —Å–∫—Ä–∏–ø—Ç—ã:

- ‚úÖ –°—Ç—Ä–æ–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (set -euo pipefail)
- ‚úÖ –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ SSH –∫–ª—é—á–µ–π
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–±—â—É—é –ø–∞–ø–∫—É
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### 4. Python —Å–∫—Ä–∏–ø—Ç:

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–ª–æ–Ω–æ–∫
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
- ‚úÖ –ì–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ CSV —Ñ–∞–π–ª–æ–≤

### 5. Ansible –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

- ‚úÖ SSH connection pooling –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 6. –ü–æ—ç—Ç–∞–ø–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:

- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 3 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —ç—Ç–∞–ø–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ –õ—É—á—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### 7. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ IP –∞–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ Ethereum –∞–¥—Ä–µ—Å–∞ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ L1 RPC URLs –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

```bash
# –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑
./run_all_stages.sh servers.csv

# –ü–æ—ç—Ç–∞–ø–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
./run_01_prepare.sh servers.csv      # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
./run_02_install_docker.sh           # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
./run_03_install_aztec.sh            # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Aztec

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
FORCE=1 ./run_02_install_docker.sh

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
VERBOSE=1 ./run_01_prepare.sh servers.csv

# Custom timeout –¥–ª—è proof
TIMEOUT=600 ./run_get_proof.sh servers.csv
```

## –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–í—Å–µ –ª–æ–≥–∏ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±—â—É—é –ø–∞–ø–∫—É `logs/`:

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤:

- `prepare_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- `docker_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
- `aztec_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Aztec
- `complete_install_YYYYMMDD_HHMMSS.log` - –æ–±—â–∏–π –ª–æ–≥ –ø–æ–ª–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `proof_collection_YYYYMMDD_HHMMSS.log` - –ª–æ–≥–∏ —Å–±–æ—Ä–∞ proof
- `proof_summary_YYYYMMDD_HHMMSS.txt` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `ansible.log` - –æ–±—â–∏–π –ª–æ–≥ Ansible (–≤ common/)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏:

- üîç –í—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- üìÅ –£–¥–æ–±–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- üîí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ git
- üìä –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- üõ†Ô∏è –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º
