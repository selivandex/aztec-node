# Zabbix Agent 2 configuration for Aztec Node monitoring
# Generated by Ansible template

# General settings
PidFile=/var/run/zabbix/zabbix_agent2.pid
LogFile=/var/log/zabbix/zabbix_agent2.log
LogFileSize=100
DebugLevel=3

# Server settings
Server={{ zabbix_server_ip }}
ServerActive={{ zabbix_server_ip }}
Hostname={{ inventory_hostname }}

# Network settings
ListenPort=10050
ListenIP=0.0.0.0

# Buffer settings
BufferSend=5
BufferSize=100

# Timeout settings
Timeout=30

# Include directory for additional configurations
Include=/etc/zabbix/zabbix_agent2.d/*.conf

# Plugin settings
Plugins.SystemRun.LogRemoteCommands=1

# Control plugins
ControlSocket=/tmp/agent.sock

# Host metadata (for auto-registration)  
HostMetadata=aztec-node,{{ ansible_distribution }},{{ ansible_distribution_version }}

# PSK encryption for autoregistration
TLSConnect=psk
TLSAccept=psk
TLSPSKIdentity=aztec-nodes-psk
TLSPSKFile=/etc/zabbix/zabbix_agent2.psk

# Refresh active checks
RefreshActiveChecks=120 
