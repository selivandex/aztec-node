<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.4</version>
    <templates>
        <template>
            <uuid>b0c3b8e8d1234567890abcdef1234567</uuid>
            <template>Template Aztec Node Monitoring</template>
            <name>Template Aztec Node Monitoring</name>
            <description>Template for monitoring Aztec blockchain nodes with systemd service checks, RPC monitoring, and synchronization status</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <items>
                <!-- Service Status Items -->
                <item>
                    <uuid>11111111-1111-1111-1111-111111111111</uuid>
                    <name>Aztec Service Status</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.service.status</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <description>Aztec node service status (1=active, 0=inactive)</description>
                    <valuemap>
                        <name>Service State</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>service</value>
                        </tag>
                    </tags>
                </item>
                
                <item>
                    <uuid>11111111-1111-1111-1111-111111111114</uuid>
                    <name>Aztec Service Uptime</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.service.uptime</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <units>s</units>
                    <description>Aztec node service uptime in seconds</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>service</value>
                        </tag>
                    </tags>
                </item>
                
                <!-- Network and RPC Items -->
                <item>
                    <uuid>22222222-2222-2222-2222-222222222221</uuid>
                    <name>Aztec Port Check</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.port.check</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <description>Aztec RPC port 8080 listening status (1=listening, 0=not listening)</description>
                    <valuemap>
                        <name>Service State</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>network</value>
                        </tag>
                    </tags>
                </item>
                
                <item>
                    <uuid>22222222-2222-2222-2222-222222222222</uuid>
                    <name>Aztec RPC Check</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.rpc.check</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <description>Aztec RPC connectivity check (1=responding, 0=not responding)</description>
                    <valuemap>
                        <name>Service State</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>rpc</value>
                        </tag>
                    </tags>
                </item>
                
                <!-- Blockchain Items -->
                <item>
                    <uuid>33333333-3333-3333-3333-333333333331</uuid>
                    <name>Aztec Local Block Number</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.block.local</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <description>Current local block number</description>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>blockchain</value>
                        </tag>
                    </tags>
                </item>
                
                <item>
                    <uuid>33333333-3333-3333-3333-333333333333</uuid>
                    <name>Aztec Sync Status</name>
                    <type>ZABBIX_PASSIVE</type>
                    <key>aztec.sync.status</key>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>UNSIGNED</value_type>
                    <description>Aztec node synchronization status (1=synced, 0=not synced)</description>
                    <valuemap>
                        <name>Sync State</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>sync</value>
                        </tag>
                    </tags>
                </item>
            </items>
            
            <triggers>
                <!-- Critical Triggers -->
                <trigger>
                    <uuid>55555555-5555-5555-5555-555555555551</uuid>
                    <expression>last(/Template Aztec Node Monitoring/aztec.service.status)=0</expression>
                    <name>Aztec service is down on {HOST.NAME}</name>
                    <priority>HIGH</priority>
                    <description>Aztec node service is not running</description>
                </trigger>
                
                <trigger>
                    <uuid>55555555-5555-5555-5555-555555555554</uuid>
                    <expression>last(/Template Aztec Node Monitoring/aztec.rpc.check)=0</expression>
                    <name>Aztec RPC not responding on {HOST.NAME}</name>
                    <priority>HIGH</priority>
                    <description>Aztec RPC is not responding to requests</description>
                </trigger>
                
                <!-- Warning Triggers -->
                <trigger>
                    <uuid>66666666-6666-6666-6666-666666666661</uuid>
                    <expression>last(/Template Aztec Node Monitoring/aztec.sync.status)=0</expression>
                    <name>Aztec node out of sync on {HOST.NAME}</name>
                    <priority>WARNING</priority>
                    <description>Aztec node is not synchronized with the network</description>
                </trigger>
            </triggers>
            
            <valuemaps>
                <valuemap>
                    <uuid>99999999-9999-9999-9999-999999999991</uuid>
                    <name>Service State</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>Down</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Up</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                
                <valuemap>
                    <uuid>99999999-9999-9999-9999-999999999992</uuid>
                    <name>Sync State</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>Not Synced</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Synced</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
</zabbix_export> 
